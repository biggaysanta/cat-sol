console.log('This site was generated by Hugo.');
console.log('Designed by Paul Brown');

// assets/js/main.js
// --- CALIBRATION TOOL ---
const debugEl = document.createElement('div');
debugEl.style.cssText = "position:fixed;top:10px;right:10px;padding:10px;background:rgba(0,0,0,0.8);color:#0f0;font-family:monospace;z-index:9999;font-size:12px;pointer-events:none;border-radius:4px;";
document.body.appendChild(debugEl);

let lastMouseX = 0, lastMouseY = 0, lastTimestamp = 0, mouseVelocity = 0;

window.addEventListener('mousemove', (e) => {
    const now = performance.now();
    const dt = now - lastTimestamp;
    if (dt < 10) return; // Cap sampling rate

    const dx = e.clientX - lastMouseX;
    const dy = e.clientY - lastMouseY;
    
    // Pixels per Millisecond
    mouseVelocity = Math.sqrt(dx*dx + dy*dy) / dt;

    // Visual feedback for calibration
    debugEl.innerText = `Velocity: ${mouseVelocity.toFixed(2)} px/ms`;

    lastMouseX = e.clientX;
    lastMouseY = e.clientY;
    lastTimestamp = now;

    // Update CSS variables for the glint position
    document.documentElement.style.setProperty('--mouse-x', `${e.clientX}px`);
    document.documentElement.style.setProperty('--mouse-y', `${e.clientY}px`);
});

// --- THE INTERACTIVE STRIKE ---
document.addEventListener('mouseover', (e) => {
    const target = e.target.closest('.logo-glass-wrap, .glass-button, .back-to-top');
    if (!target) return;

    // CALIBRATION LOGIC:
    // If velocity is < 0.2, it's a "brush." If > 1.5, it's a "strike."
    let volume = Math.min(Math.max(mouseVelocity * 0.1, 0.01), 0.25);
    
    const soundType = target.classList.contains('logo-glass-wrap') ? 'firm' : 'soft';
    
    console.log(`%c Strike! Type: ${soundType} | Vol: ${volume.toFixed(2)}`, "color: #ffaa00");
    playGlassSound(soundType, volume);
});
